# YouTube動画自動生成パイプライン

## 1. プロジェクトの目的

このプロジェクトは、GitHub Issuesを起点として、Jules（Geminiエージェント）が台本、立ち絵、音声、環境音、サムネイル、動画タイトル、紹介文などのアセットを自動生成し、日本語のYouTube動画制作を自動化するパイプラインです。

## 2. 主なツール構成

本パイプラインは、以下のツール群を連携させて動作します。

- **Jules (Gemini エージェント)**: 全体の自動化フローを実行するエージェント。
- **Gemini**: 台本、立ち絵（キャラクター画像）、動画タイトル、紹介文などの生成。
- **CoeFont**: 日本語テキストからの音声合成（TTS）。
- **Stable Audio**: 動画の雰囲気に合わせた環境音（アンビエンス）の生成。
- **ImageMagick**: Linuxサンドボックス環境内で、背景、立ち絵、テキストを合成し、サムネイルを生成。
- **Git LFS**: 立ち絵、音声、サムネイルなどの大容量バイナリファイルを効率的に管理。

## 3. ディレクトリ構成

プロジェクトの主要なディレクトリとファイルは以下の通りです。

```
.
├── .github/ISSUE_TEMPLATE/   # 動画生成の起点となるIssueテンプレート
├── assets/issues/<issue_id>/ # 各Issueに対応する生成アセットの格納場所
│   ├── images/               # 立ち絵画像
│   ├── voice/                # 合成音声
│   ├── ambience/             # 環境音
│   ├── text/                 # 台本、タイトル、概要
│   ├── thumb/                # サムネイル画像
│   └── metadata.json         # 生成アセットのメタデータ
├── config/common.yml         # 共通設定ファイル
├── docs/                     # プロジェクトの仕様書
├── .gitattributes            # Git LFSの設定
└── README.md                 # このファイル
```

## 4. 実行フロー

自動化のプロセスは、以下の流れで実行されます。

1.  **Issue発行**: `/.github/ISSUE_TEMPLATE/` に基づいて新しいIssueが作成されると、ワークフローがトリガーされます。
2.  **アセット自動生成**: JulesエージェントがIssueの内容を解釈し、各種ツール（Gemini, CoeFont, Stable Audio）を呼び出してアセットを生成します。
3.  **自己チェック**: 生成されたアセット（画像サイズ、音声フォーマットなど）が規定の条件を満たしているかを自動で検証します。
4.  **成果物Push**: 検証をパスしたアセットを `assets/issues/<issue_id>/` ディレクトリに格納し、Git LFSを使用してリポジトリにPushします。
5.  **Pull Request作成**: 成果物を含むブランチから、マージを促すPull Requestを自動で作成します。

## 5. 前提条件と実行環境

本パイプラインの実行には、以下の環境と設定が必要です。

### 必要なSecrets

リポジトリのSecretsに、以下のキーでAPIトークンなどを設定する必要があります。

- `COEFONT_API_KEY`
- `STABLE_AUDIO_TOKEN`

### 利用環境

- **OS**: Linux CLI環境
- **フォント**: サムネイルのテキスト描画に `Noto Sans JP` フォントが必要です。
- **必須ツール**: `ImageMagick` がインストールされている必要があります。
- **Git**: `Git LFS` が有効化されている必要があります。
